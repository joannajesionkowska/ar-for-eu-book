<!DOCTYPE html>
<html>

  ﻿<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Configuring Windows for Development with Hololens (complete)</title>
    <meta name="description" content="The Open Augmented Reality Teaching Book">

    <link rel="stylesheet" href="/ar-for-eu-book/css/main.css">
    <link rel="canonical" href="https://klamma.github.io/ar-for-eu-book/chapter/holotoolkit/">
    <link rel="alternate" type="application/rss+xml" title="The Open Augmented Reality Teaching Book" href="https://klamma.github.io/ar-for-eu-book/feed.xml">

    <!-- Favicon head tag -->
    <link rel="shortcut icon" href="/ar-for-eu-book/favicon.ico" type="image/x-icon">

    <!-- Visualization Libraries -->
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/highcharts-more.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>

    <!-- formula rendering -->
    <script type="text/javascript" async
            src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>

</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/ar-for-eu-book/">The Open Augmented Reality Teaching Book</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
	  <a class="page-link" href="https://codereality.net/">Code Reality</a>
          <a class="page-link" href="/ar-for-eu-book/posts">Blog Posts</a>
          <a class="page-link" href="/ar-for-eu-book/toc">Table of Content</a>
          <a class="page-link" href="/ar-for-eu-book/references">Bibliography</a>
          <a class="page-link" href="/ar-for-eu-book/contrib">Contributors</a>
          <a class="page-link" href="/ar-for-eu-book/about">About</a>
      </div>
    </nav>

  </div>

</header>



    <div class="page-content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">Configuring Windows for Development with Hololens (complete)</h1>
  </header>

  <div class="post-content">
    
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<script>
    // script for exchanging version-specific content.
    $(document).ready(function () {
        $('.unityVersionSpecific').hide();
        $('.unity2017-4').show();
        $('#versionSelectorUnity').change(function () {
            $('.unityVersionSpecific').hide();
            $('.'+$(this).val()).show();
    })
});
</script>

<blockquote>
  <p>Please select your Unity version:</p>
</blockquote>

<blockquote>
  <p><select id="versionSelectorUnity">
  <option value="unity2017-4">Unity 2017.4</option>
</select></p>
</blockquote>

<blockquote>
  <p class="unityVersionSpecific unity2017-4">You have selected Version 2017.4.
This is the long term support version.</p>
</blockquote>

<h1 id="configuration">Configuration</h1>

<p>This tutorial was written for Unity3D 2017.4.31f1 (15 Aug, 2019).
Via the UnityHub the modules for Windows Store .NET Scripting Backend and Windows Store IL2CPP Scripting Backend have been added.
It uses Visual Studio 2017 (15.9.15) and the Windows 10 SKD 10.0.17134, see also release notes at https://github.com/microsoft/MixedRealityToolkit-Unity/releases.</p>

<p>It is crucial to install the required components for Visual Studio 2017 (.NET support, unity support, and the Windows 10 SDKs).</p>

<p><img src="../../assets/figures/holotoolkit/visualstudio-windows10sdks.png" alt="Unity Downloads" /></p>

<p>Beware: When installing through the UnityHub, the version 2017.4.31f1 is not necessarily offered, but has to be selected from the Unity3D website (click on Download Unity in the dark footer of the homepage, then click on Older Versions in the dark footer, then select 2017 to click on the UnityHub Download for the latest version 2017.4.31f1).</p>

<p><img src="../../assets/figures/holotoolkit/unity3dwebsite2017431f1.png" alt="Unity Downloads" /></p>

<p>When you create your new project, select as target platform 2017.4.31f1.
Once Unity is up and running, delete the camera and lighting from the game object Hierarchy (right click &gt; delete).
Then navigate in the menu to File &gt; Build Settings.
Select “Universal Windows”.</p>

<p><img src="../../assets/figures/holotoolkit/build settings.png" alt="Unity Downloads" /></p>

<p>Navigate to Edit &gt; Project Settings &gt; Quality.
Make sure that for the column with the Windows icon, the default quality setting is set to “very low”.</p>

<p><img src="../../assets/figures/holotoolkit/quality settings.png" alt="Unity Downloads" /></p>

<p>Then navigate to menu Edit &gt; Project Settings &gt; Player.
There are several important settings that need to be done here.
First and foremost, under XR settings, VR support has to be ticked and “Windows Mixed Reality” must be added to the list (best clean out the rest).</p>

<p><img src="../../assets/figures/holotoolkit/player settings - xr.png" alt="Unity Downloads" /></p>

<p>Furthermore, select the group “Publishing Settings” and make sure it has a unique package name.
Additionally, don’t forget to add a meaningful Product Name at the very top.
Depending on what functionality you will be using, several “Capabilities” have to be added here.
For our tutorial, we will be using “Internet Client”, “Microphone”, “Objects3D”, and “Spatial Perception”.</p>

<p><img src="../../assets/figures/holotoolkit/publishing settings.png" alt="Unity Downloads" /></p>

<p>Most importantly, the “Other” settings must set the Configuration setting for Scripting Backend to “IL2CPP” (as .NET is being phased out).</p>

<p><img src="../../assets/figures/holotoolkit/player settings - other.png" alt="Unity Downloads" /></p>

<p>Sometimes, when compiling not via the Unity Mixed Reality Toolkit build window, but directly with Visual Studio 2017, the solution forgets which one is the main one (right click on the non-editor/player solution and set as StartUp Project).
Moreover, sometimes the Capabilities are forgotten, in which case you have to find the Package.appxmanifest, click on Capabilities, and make sure the right ones are ticked.
Similarly, remnants of packages no longer used some-times linger around in the configuration files, causing havoc.
Vuforia is such an example (and here is a solution for that).</p>

<p>There are many other pitfalls, as software is still experimental.
Cryptic error messages in Visual Studio, however, most often indicate version conflicts between not the right version of Unity, missing Unity modules, not the right version of the Windows 10 SDK, not the right version of Visual Studio, missing automatic updates of nuGet packages, missing Unity support for Visual Studio.</p>

<p>Download the 2017.4.3.0 Refresh Holotoolkit unity package from here (no need for the exam-ples and preview or sources) - we well come back to this in the first step - Spatial Mapping - of the tutorial.</p>

<p>Set up your Unity panels so that they look like this: Scene / Game top left, console bottom left.
Hierarchy above Project in the middle column, and Inspector on the right.
You can also open Window &gt; Holographic Emulation and drag it to rest with Scene and Game.
And you can open the Mixed Reality Toolkit &gt; Build Window.</p>

<p><img src="../../assets/figures/holotoolkit/panel layout.png" alt="Unity Downloads" /></p>

<h1 id="testing">Testing</h1>

<p>The simplest way to test the app is to use holographic remoting.
For this, the Holographic Re-moting Player has to be installed on the Hololens from the Windows Store.
Once started, the app will display the IP address of the Hololens.
If your development machine is on the same network (and the network is reasonably open - like your home network), then Unity can directly connect to this IP address.</p>

<p><img src="../../assets/figures/holotoolkit/holographic-remoting.jpg" alt="Holographic remoting demo" /></p>

<p><img src="../../assets/figures/holotoolkit/holographic remoting.png" alt="Holographic remoting settings" /></p>

<p>Pressing the big play button, will now launch the app directly on the Hololens, also providing a preview in the Game panel.</p>

<p><img src="../../assets/figures/holotoolkit/holographic remoting - demo.jpg" alt="Preview using Holographic Remoting" /></p>

<p>NOTE: Holographic remoting does no longer work when using the Vuforia package.
This is to do with the camera not being released from processing (probably for performance reasons).</p>

<h1 id="building">Building</h1>

<p>Since a few versions back, the HoloToolkit also provides a convenient Build Window, which automates some of the work for you.
By hand, you’d have to Build the app, then open this ex-ported (‘build’) solution with Visual Studio, then build the executable and install it on the glass-es.
The Build Window is still bit instable and not always every step works - on this machine, for example, installing from there onto the device does not work and I have to use the web device portal for that.
Nonetheless, building is a lot more convenient from here, see this:</p>

<p><img src="../../assets/figures/holotoolkit/build window.png" alt="Build Window" /></p>

<p>Once the Unity Project is built, the appx bundle can be built, which then can be installed via the device portal.
(Don’t forget to add the Dependencies\x86\ files the first time around!).</p>

<p><img src="../../assets/figures/holotoolkit/device-portal-install.png" alt="Installation via Device Portal" /></p>

<p><img src="../../assets/figures/holotoolkit/app start.jpg" alt="Launch App from Windows Start Menu" /></p>

<p><img src="../../assets/figures/holotoolkit/app - scanning.jpg" alt="Running App" /></p>

<p><img src="../../assets/figures/holotoolkit/app - brains.jpg" alt="Running App" /></p>

  </div>

</article>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">The Open Augmented Reality Teaching Book</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>The Open Augmented Reality Teaching Book</li>
          <li><a href="mailto:klamma@dbis.rwth-aachen.de">klamma@dbis.rwth-aachen.de</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          <li>
            <a href="https://twitter.com/AR_FOR_EU"><span class="icon icon--twitter"><svg viewBox="0 0 16 16"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">AR_FOR_EU</span></a>

          </li>
          <li>
            <a href="/ar-for-eu-book/feed.xml"><span class="icon icon-rss"><?xml version="1.0"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"> 
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="128px" height="128px" id="RSSicon" viewBox="0 0 256 256">
<defs>
<linearGradient x1="0.085" y1="0.085" x2="0.915" y2="0.915" id="RSSg">
<stop  offset="0.0" stop-color="#E3702D"/><stop  offset="0.1071" stop-color="#EA7D31"/>
<stop  offset="0.3503" stop-color="#F69537"/><stop  offset="0.5" stop-color="#FB9E3A"/>
<stop  offset="0.7016" stop-color="#EA7C31"/><stop  offset="0.8866" stop-color="#DE642B"/>
<stop  offset="1.0" stop-color="#D95B29"/>
</linearGradient>
</defs>
<rect width="256" height="256" rx="55" ry="55" x="0"  y="0"  fill="#CC5D15"/>
<rect width="246" height="246" rx="50" ry="50" x="5"  y="5"  fill="#F49C52"/>
<rect width="236" height="236" rx="47" ry="47" x="10" y="10" fill="url(#RSSg)"/>
<circle cx="68" cy="189" r="24" fill="#FFF"/>
<path d="M160 213h-34a82 82 0 0 0 -82 -82v-34a116 116 0 0 1 116 116z" fill="#FFF"/>
<path d="M184 213A140 140 0 0 0 44 73 V 38a175 175 0 0 1 175 175z" fill="#FFF"/>
</svg>
</span><span class="username">Subscribe</span></a>

          </li>
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>The Open Augmented Reality Teaching Book</p>
      </div>
    </div>

  </div>

</footer>


    <!-- load visualizations (at the end so that the div elements are known here) -->
    
  </body>

</html>
